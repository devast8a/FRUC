# Metadata
name: 'FANG'
author: 'devast8a'

################################################################################
document = WS? statement+ WS? :: Document

block = start statement+ end
    start = INDENT
    end = DEDENT

################################################################################
statement function_definition = 'def' name parameters? '->' body? :: Function
    body = block
    name = identifier
    parameters = '(' parameter**',' ')'

    parameter = name ':' type :: FunctionParameter
        name = identifier
        type = identifier

statement assignment = assignable '=' expression :: Assignment
    assignable = identifier

statement expression function_call = callable arguments :: Call
    callable = identifier
    arguments = '(' argument**',' ')'
    argument = expression



statement = variable_definition
variable_definition = 'var' name ':' type :: VariableDefinition
    name = identifier
    type = identifier



statement while = 'while' condition body? :: While
    condition = expression
    body = block

statement if = 'if' condition body? if_elif* if_else? :: If
    condition = expression
    body = block

if_elif = keyword condition body? :: IfElif
    condition = expression
    keyword = 'elif'
    body = block

if_else = 'else' body?
    body = block

################################################################################

expression integer = /[0-9]+/ :: IntegerDecimal

expression string = string_
    string_ single_quote = /'[^'\r\n]+'/ :: StringSimple
    string_ double_quote = /"[^"\r\n]+"/ :: StringSimple

expression identifier = /[a-zA-Z_][a-zA-Z_0-9]*/ :: Identifier

################################################################################

@root = document

@between = WS?

WS = /[ \t\n]+/
    ignore: @true

INDENT = %INDENT
    ignore: @true

DEDENT = %DEDENT
    ignore: @true
